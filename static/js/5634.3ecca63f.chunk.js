"use strict";(self.webpackChunktest=self.webpackChunktest||[]).push([[5634],{85634:(e,r,s)=>{s.r(r),s.d(r,{default:()=>b});var t=s(19148),a=s(94600),l=s(36014),c=s(94178),o=s(56147),i=s(78819),n=s(61918),d=s(25930),u=s(17791),f=s(18406),h=s(2244),g=s(86761),p=s(55948);const x=(0,i.ZP)(c.Z)((e=>{let{theme:r}=e;return{backgroundColor:"dark"===r.palette.mode?"#1A2027":"#fff",...r.typography.body2,padding:r.spacing(1),textAlign:"center",color:r.palette.text.secondary}}));function b(){const{id:e}=(0,a.UO)(),{address:r}=(0,n.mA)(),[s,c]=(0,t.useState)(!1),[i,b]=(0,t.useState)(!1),[m,y]=(0,t.useState)(!1),j=(0,u.$l)(),w=(0,d.Or)(),k=(0,d.db)(),[v,N]=(0,t.useState)([]),[P,E]=(0,t.useState)([]),[O,S]=(0,t.useState)(0),[Z,C]=(0,t.useState)(0),F=`https://salmon-eldest-squirrel-166.mypinata.cloud/ipfs/QmQnfuesd29z6zBfbPkNHH9XuMg9n2oXC7T4z33UdeVjRh/${e}.json`;return(0,t.useEffect)((()=>{(async()=>{try{const e=await fetch(F),r=await e.json();N(r)}catch(e){console.error("Error fetching data : ",e)}})(),k&&(async()=>{try{const r=await k.listings(Number(e-1));E(r)}catch(r){console.error("Error fetching data : ",r)}})()}),[r,k]),(0,p.jsx)(p.Fragment,{children:void 0===P.seller?(0,p.jsx)(h.Z,{title:"Loading..."}):(0,p.jsx)("div",{className:"flex justify-center w-full md:max-w-7xl mt-12",children:(0,p.jsxs)("div",{className:"container m-3",children:[(0,p.jsx)("h1",{className:"text-center text-3xl font-semibold mb-10",children:"Deputy Dawgs NFT Make Offer"}),(0,p.jsx)("div",{children:(0,p.jsx)(l.Z,{sx:{flexGrow:1},children:(0,p.jsxs)(o.ZP,{container:!0,spacing:6,children:[(0,p.jsx)(o.ZP,{item:!0,md:6,sx:12,children:(0,p.jsx)(x,{children:(0,p.jsx)(l.Z,{children:(0,p.jsx)("img",{src:v.image,alt:v.name})})})}),(0,p.jsxs)(o.ZP,{item:!0,md:6,sx:12,children:[(0,p.jsxs)(l.Z,{children:[(0,p.jsxs)("p",{class:"text-lg font-semibold p-2",children:[" Name : ",v.name," "]}),(0,p.jsxs)("p",{class:"text-lg font-semibold p-2",children:[" Seller : ",P.seller," "]}),(0,p.jsxs)("p",{class:"text-lg font-semibold p-2",children:[" Price : ",Number(P.price)/10**18," ETH "]}),r===P.seller?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("input",{type:"number",id:"price-input",class:"block m-4 p-2.5 w-4/5 z-20 ps-3 text-sm text-gray-900 bg-gray-50 rounded-lg border-e-gray-50 border-e-2 border border-gray-300 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-e-gray-700  dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:border-blue-500",placeholder:"Update the Price",onChange:()=>{var e;C(e.target.value)},required:!0}),(0,p.jsx)("div",{class:"w-56 flex justify-center m-4",children:(0,p.jsx)("button",{className:"custom_btn mt-5 hover:bg-hover flex justify-center disabled:opacity-50 disabled:hover:scale-100 w-full rounded-lg hover:scale-105 transition ease-in-out p-[8px] bg-secondary-700",onClick:()=>(async()=>{try{b(!0);const r=await k.updateNFTPrice(e-1,Z*10**18);await r.wait(),b(!1),(0,f.h)("Update Price Successfully!"),console.log("Update Price Successfully!")}catch(r){(0,f.h)("Error : ",r.reason),console.error("Error Update Price : ",r),b(!1)}})(),children:i?(0,p.jsx)(h.Z,{title:"Updating Price Now..."}):"UPDATE PRICE"})}),(0,p.jsx)("p",{class:"text-lg p-2 mb-20 ml-2",children:" Please update your NFT price. "})]}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("input",{type:"number",id:"price-input",class:"block m-4 p-2.5 w-4/5 z-20 ps-3 text-sm text-gray-900 bg-gray-50 rounded-lg border-e-gray-50 border-e-2 border border-gray-300 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-e-gray-700  dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:border-blue-500",placeholder:"Please enter offer price",onChange:()=>{var e;S(e.target.value)},required:!0}),(0,p.jsx)("div",{class:"w-56 flex justify-center m-4",children:(0,p.jsx)("button",{className:"custom_btn mt-5 hover:bg-hover flex justify-center disabled:opacity-50 disabled:hover:scale-100 w-full rounded-lg hover:scale-105 transition ease-in-out p-[8px] bg-secondary-700",onClick:()=>(async()=>{try{c(!0);const r=await k.makeOffer(e-1,{value:g.fi(String(O))});await r.wait(),c(!1),(0,f.h)("success","you have successfully made an Offer"),console.log("Make Offer Successfully!")}catch(r){(0,f.h)("Error : ",r.reason),console.error("Error Make Offer : ",r),c(!1)}})(),children:s?(0,p.jsx)(h.Z,{title:"Sending Offer Now..."}):"SEND OFFER"})}),(0,p.jsx)("p",{class:"text-lg p-2 mb-20 ml-2",children:" Please send your offer price to owner of this NFT. "})]})]}),0===P.highestBid?null:(0,p.jsxs)(l.Z,{children:[(0,p.jsxs)("p",{class:"text-lg font-semibold p-2",children:[" Buyer : ",P.highestBidder," "]}),(0,p.jsxs)("p",{class:"text-lg font-semibold p-2",children:[" Offer Price : ",Number(P.highestBid)/10**18," ETH "]}),(0,p.jsx)("div",{class:"w-56 flex justify-center m-4",children:(0,p.jsx)("button",{className:"custom_btn  mt-5 hover:bg-hover  flex justify-center disabled:opacity-50 disabled:hover:scale-100  w-full rounded-lg hover:scale-105 transition ease-in-out p-[8px] bg-secondary-700",onClick:()=>(async()=>{try{y(!0);const r=await w.approve(j,e);await r.wait();const s=await k.acceptOffer(e-1);await s.wait(),y(!1),(0,f.h)("Accept Offer Successfully!"),console.log("Accept Offer Successfully!")}catch(r){(0,f.h)("Error : ",r.reason),console.error("Error Accept Offer : ",r),y(!1)}})(),children:m?(0,p.jsx)(h.Z,{title:"Accepting Offer Now..."}):"ACCEPT OFFER"})})]})]})]})})})]})})})}}}]);